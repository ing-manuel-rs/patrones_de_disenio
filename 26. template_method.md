# **Template method**

Es un patr√≥n de comportamiento que define:
- Una plantilla general del algoritmo en una clase abstracta.    
- M√©todos "ganchos" (`hook methods`) que pueden ser implementados o sobreescritos por subclases.

Esto permite que:
- La l√≥gica principal permanezca intacta.
- Los detalles espec√≠ficos se deleguen a las subclases.



## Met√°fora real

Piensa en el proceso de hacer una bebida caliente:
1. Hervir agua
2. Verter agua en una taza
3. Agregar bebida (caf√© o t√©)
4. Agregar extras (az√∫car, leche, lim√≥n‚Ä¶)
Los pasos 1 y 2 son comunes, pero los pasos 3 y 4 var√≠an seg√∫n la bebida.



## Ejemplo en JavaScript: bebida caliente (t√© y caf√©)

Clase base con m√©todo plantilla
```js
class BebidaCaliente {
  preparar() {
    this.hervirAgua();
    this.verterEnTaza();
    this.agregarIngredientePrincipal();
    this.agregarExtras();
  }

  hervirAgua() {
    console.log("üî• Herviendo agua...");
  }

  verterEnTaza() {
    console.log("‚òï Vertiendo agua en la taza...");
  }

  // M√©todo abstracto: debe ser implementado por subclases
  agregarIngredientePrincipal() {
    throw new Error("Debe implementar agregarIngredientePrincipal()");
  }

  // M√©todo gancho: puede ser opcionalmente sobreescrito
  agregarExtras() {
    // Por defecto, no se agrega nada
  }
}
```

Subclases concretas
```js
class Te extends BebidaCaliente {
  agregarIngredientePrincipal() {
    console.log("ü´ñ Agregando bolsita de t√©...");
  }

  agregarExtras() {
    console.log("üçã Agregando rodaja de lim√≥n...");
  }
}

class Cafe extends BebidaCaliente {
  agregarIngredientePrincipal() {
    console.log("‚òï Agregando caf√© molido...");
  }

  agregarExtras() {
    console.log("ü•õ Agregando leche y az√∫car...");
  }
}
```

Uso
```js
const miTe = new Te();
miTe.preparar();
// üî• Herviendo agua...
// ‚òï Vertiendo agua en la taza...
// ü´ñ Agregando bolsita de t√©...
// üçã Agregando rodaja de lim√≥n...

const miCafe = new Cafe();
miCafe.preparar();
// üî• Herviendo agua...
// ‚òï Vertiendo agua en la taza...
// ‚òï Agregando caf√© molido...
// ü•õ Agregando leche y az√∫car...
```



## ¬øCu√°ndo usar Template Method?

| Situaci√≥n                                                | Ejemplo                                        |
| -------------------------------------------------------- | ---------------------------------------------- |
| Tienes un algoritmo con pasos fijos, pero algunos var√≠an | Recetas, flujos de validaci√≥n, pipelines       |
| Quieres evitar duplicar c√≥digo base                      | L√≥gica com√∫n en una clase abstracta            |
| Deseas forzar un orden l√≥gico                            | Asegurar que los pasos se llaman correctamente |



## Ejemplos reales

| Contexto               | Ejemplo                                                            |
| ---------------------- | ------------------------------------------------------------------ |
| Frameworks web         | M√©todos `onInit()`, `onRender()`, `onDestroy()`                    |
| Testing frameworks     | Setup ‚Üí Test ‚Üí Teardown                                            |
| Juegos                 | Ciclo de juego (iniciar, procesar entrada, actualizar, renderizar) |
| Procesamiento de datos | Leer ‚Üí Transformar ‚Üí Exportar                                      |



## Ventajas

| Ventaja                                  | Explicaci√≥n                                  |
| ---------------------------------------- | -------------------------------------------- |
| Reutilizaci√≥n de l√≥gica com√∫n            | El algoritmo base est√° en la superclase      |
| Flexibilidad controlada                  | Las subclases solo redefinen lo necesario    |
| Fuerza el orden de ejecuci√≥n             | No se rompe el flujo del algoritmo principal |
| Compatible con el Principio de Hollywood | ‚ÄúNo me llames, yo te llamar√©‚Äù                |



## Desventajas

|Desventaja|Explicaci√≥n|
|---|---|
|Menor flexibilidad si se abusa|A veces las subclases necesitan m√°s control|
|Depende de la herencia|Puede ser m√°s r√≠gido que composici√≥n|
|Dif√≠cil de leer si hay demasiados pasos|Puede volverse confuso y acoplado|