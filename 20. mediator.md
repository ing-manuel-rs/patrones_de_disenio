# **Mediator**

El patr√≥n Mediator permite reducir el acoplamiento entre m√∫ltiples objetos que se comunican entre s√≠, centralizando la comunicaci√≥n en un objeto mediador.

En lugar de que los objetos se comuniquen entre ellos directamente, todos se comunican a trav√©s del mediador, quien se encarga de coordinar las interacciones.



## ¬øQu√© es el patr√≥n Mediator?

Es un patr√≥n de comportamiento que centraliza la comunicaci√≥n entre objetos de un sistema complejo, evitando la dependencia directa entre ellos.

> "No m√°s charla entre colegas. Habla con el jefe."

Este patr√≥n se utiliza para organizar y coordinar objetos que se relacionan entre s√≠ de forma compleja, evitando el t√≠pico problema de "todos hablan con todos".



## Met√°fora real

Imagina una torre de control en un aeropuerto:
- Pilotos (objetos) no se comunican entre s√≠.
- Todos hablan con la torre de control (mediador).
- La torre organiza los despegues, aterrizajes y evita colisiones.
Esto mejora la seguridad y coordinaci√≥n, como lo hace el patr√≥n Mediator en tu c√≥digo.



## Ejemplo en JavaScript: Chat entre usuarios

Clase Mediador
```js
class Chat {
  constructor() {
    this.usuarios = [];
  }

  registrar(usuario) {
    this.usuarios.push(usuario);
    usuario.chat = this;
  }

  enviar(mensaje, emisor) {
    this.usuarios.forEach(usuario => {
      if (usuario !== emisor) {
        usuario.recibir(mensaje, emisor.nombre);
      }
    });
  }
}
```

Clase Usuario
```js
class Usuario {
  constructor(nombre) {
    this.nombre = nombre;
    this.chat = null;
  }

  enviar(mensaje) {
    console.log(`üó£Ô∏è ${this.nombre} dice: ${mensaje}`);
    this.chat.enviar(mensaje, this);
  }

  recibir(mensaje, de) {
    console.log(`üì© ${this.nombre} recibi√≥ de ${de}: "${mensaje}"`);
  }
}
```

Uso
```js
const chat = new Chat();

const alice = new Usuario("Alice");
const bob = new Usuario("Bob");
const charlie = new Usuario("Charlie");

chat.registrar(alice);
chat.registrar(bob);
chat.registrar(charlie);

alice.enviar("¬°Hola a todos!");
```

Salida
```js
Alice dice: ¬°Hola a todos!
Bob recibi√≥ de Alice: "¬°Hola a todos!"
Charlie recibi√≥ de Alice: "¬°Hola a todos!"
```



## ¬øCu√°ndo usar Mediator?

| Situaci√≥n                                         | Ejemplo                                  |
| ------------------------------------------------- | ---------------------------------------- |
| M√∫ltiples objetos deben comunicarse entre s√≠      | Componentes UI, microservicios, plugins  |
| Quieres **reducir el acoplamiento** entre objetos | Interacciones din√°micas y complejas      |
| Quieres centralizar la l√≥gica de coordinaci√≥n     | Eventos, formularios, sistemas reactivos |



## Ejemplos reales del patr√≥n Mediator

| Contexto            | Aplicaci√≥n                                            |
| ------------------- | ----------------------------------------------------- |
| Interfaces gr√°ficas | Botones, inputs, validaciones coordinadas por un form |
| Motores de juego    | Objetos del juego que interact√∫an a trav√©s del motor  |
| WebSockets          | Cliente ‚Üî servidor mediando la comunicaci√≥n           |
| JavaScript frontend | EventBus / PubSub entre componentes Vue/React         |



## Ventajas

| Ventaja                           | Explicaci√≥n                                           |
| --------------------------------- | ----------------------------------------------------- |
| Menor acoplamiento                | Los objetos no se conocen entre s√≠                    |
| Mayor claridad en la comunicaci√≥n | Toda la l√≥gica pasa por un punto √∫nico (mediador)     |
| Reutilizaci√≥n de componentes      | Puedes cambiar colegas sin cambiar su l√≥gica interna  |
| Coordinaci√≥n central              | Ideal cuando necesitas una l√≥gica orquestada compleja |



## Desventajas

|Desventaja|Explicaci√≥n|
|---|---|
|Mediador puede volverse gigante|Si centralizas toda la l√≥gica ah√≠|
|M√°s c√≥digo inicial|Necesitas crear interfaces y estructuras de comunicaci√≥n|
|Over-engineering|No es √∫til si solo hay 2-3 objetos simples|