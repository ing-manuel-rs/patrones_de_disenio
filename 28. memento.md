# **Memento**

El patr贸n Memento encapsula el estado de un objeto dentro de otro objeto (el "memento"), y luego ese memento es administrado por un cuidador (caretaker).

Se compone de tres partes:
1. **Originator**: El objeto cuyo estado quieres guardar.
2. **Memento**: El objeto que guarda el estado interno del originator.
3. **Caretaker**: El responsable de almacenar y restaurar los mementos.



## Met谩fora real

Imagina que est谩s jugando un videojuego. Al avanzar, puedes guardar tu partida (crear un memento). Si mueres o te equivocas, puedes cargar la partida guardada (restaurar el estado).
- El juego = Originator
- El archivo de guardado = Memento
- El men煤 de guardado/carga = Caretaker



## Ejemplo en JavaScript: editor de texto con deshacer

Originator: el editor
```js
class EditorTexto {
  constructor() {
    this.contenido = "";
  }

  escribir(texto) {
    this.contenido += texto;
  }

  mostrar() {
    console.log("", this.contenido);
  }

  guardar() {
    return new Memento(this.contenido);
  }

  restaurar(memento) {
    this.contenido = memento.getEstado();
  }
}
```

Memento
```js
class Memento {
  constructor(estado) {
    this._estado = estado; // estado interno protegido
  }

  getEstado() {
    return this._estado;
  }
}
```

Caretaker: historial de cambios
```js
class Historial {
  constructor() {
    this.pila = [];
  }

  guardar(memento) {
    this.pila.push(memento);
  }

  deshacer() {
    return this.pila.pop();
  }
}
```

Uso
```js
const editor = new EditorTexto();
const historial = new Historial();

editor.escribir("Hola");
historial.guardar(editor.guardar());

editor.escribir(" mundo");
historial.guardar(editor.guardar());

editor.escribir(" cruel");
editor.mostrar(); //  Hola mundo cruel

// Deshacer 煤ltimo cambio
editor.restaurar(historial.deshacer());
editor.mostrar(); //  Hola mundo

// Deshacer otro cambio
editor.restaurar(historial.deshacer());
editor.mostrar(); //  Hola
```



## 驴Cu谩ndo usar Memento?

| Situaci贸n                                | Ejemplo                            |
| ---------------------------------------- | ---------------------------------- |
| Implementar funcionalidades de undo/redo | Editores, juegos, formularios      |
| Hacer snapshots del estado               | Guardado autom谩tico, checkpoints   |
| Evitar exponer estado interno            | Encapsulamiento estricto           |
| Restaurar configuraci贸n anterior         | Revertir cambios o configuraciones |



## Ejemplos reales del patr贸n Memento

|Contexto|Aplicaci贸n del patr贸n|
|---|---|
|IDEs / Editores|Deshacer cambios, guardar versiones|
|Juegos|Save/Load (partidas)|
|Formularios Web|Guardar borradores, restaurar datos previos|
|Sistemas de archivos|Puntos de restauraci贸n|
|Aplicaciones m贸viles|Estado persistente entre sesiones|



## Ventajas

| Ventaja                         | Explicaci贸n                                           |
| ------------------------------- | ----------------------------------------------------- |
| No viola el encapsulamiento     | El estado se guarda sin exponer datos sensibles       |
| Implementa undo/redo f谩cilmente | Con stacks de mementos                                |
| Separaci贸n de responsabilidades | El originador no gestiona el historial                |
| Permite m煤ltiples checkpoints   | Puedes guardar distintos estados en cualquier momento |



## Desventajas

|Desventaja|Explicaci贸n|
|---|---|
|Puede consumir mucha memoria|Si el estado es grande y se guardan muchos mementos|
|Sincronizaci贸n puede ser dif铆cil|En sistemas concurrentes|
|Requiere l贸gica para limpiar|Si no hay l铆mite, se acumulan muchos estados|