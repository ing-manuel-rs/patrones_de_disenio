# **State**

El patr√≥n State permite que un objeto tenga diferentes comportamientos seg√∫n su estado, encapsulando cada comportamiento dentro de una clase separada.
- En lugar de tener condicionales del tipo `if (estado === 'x') { ... }`,
- Se delega el comportamiento a objetos que representan cada estado.
Este patr√≥n se basa en composici√≥n, no en condicionales o herencia.



## Met√°fora real

Imagina un sem√°foro:
- Cada luz (verde, amarillo, rojo) representa un estado con un comportamiento diferente.
- El sem√°foro cambia de estado autom√°ticamente.
- Cada estado sabe cu√°l es el siguiente.
üü¢ Verde ‚Üí üü° Amarillo ‚Üí üî¥ Rojo ‚Üí üü¢ Verde...



## Ejemplo en JavaScript: reproductor de m√∫sica

Supongamos que est√°s creando un reproductor de m√∫sica que tiene tres estados:
- ‚ñ∂Ô∏è   Reproduciendo
- ‚è∏Ô∏è Pausado
- ‚èπÔ∏è Detenido
Cada uno responde distinto al presionar un bot√≥n.

Interfaz de estado
```js
class Estado {
  manejar(reproductor) {
    throw new Error("M√©todo manejar() no implementado");
  }
}
```

Estados concretos
```js
class EstadoReproduciendo extends Estado {
  manejar(reproductor) {
    console.log("‚è∏Ô∏è Pausando m√∫sica...");
    reproductor.setEstado(new EstadoPausado());
  }
}

class EstadoPausado extends Estado {
  manejar(reproductor) {
    console.log("‚ñ∂Ô∏è Reanudando m√∫sica...");
    reproductor.setEstado(new EstadoReproduciendo());
  }
}

class EstadoDetenido extends Estado {
  manejar(reproductor) {
    console.log("‚ñ∂Ô∏è Iniciando m√∫sica...");
    reproductor.setEstado(new EstadoReproduciendo());
  }
}
```

Contexto
```js
class Reproductor {
  constructor() {
    this.estado = new EstadoDetenido(); // Estado inicial
  }

  setEstado(estado) {
    this.estado = estado;
  }

  presionarBoton() {
    this.estado.manejar(this);
  }
}
```

Uso
```js
const player = new Reproductor();

player.presionarBoton(); // ‚ñ∂Ô∏è Iniciando m√∫sica...
player.presionarBoton(); // ‚è∏Ô∏è Pausando m√∫sica...
player.presionarBoton(); // ‚ñ∂Ô∏è Reanudando m√∫sica...
```



## ¬øCu√°ndo usar el patr√≥n State?

| Situaci√≥n                                              | Ejemplo                         |
| ------------------------------------------------------ | ------------------------------- |
| Un objeto tiene muchos comportamientos seg√∫n su estado | Reproductor, sem√°foro, login    |
| Quieres evitar `if/else` o `switch` repetitivos        | `if (estado === 'x') { ... }`   |
| El objeto debe cambiar de comportamiento din√°micamente | Formulario multietapa, conexi√≥n |



## Ejemplos reales

| Caso             | Estados                               |
| ---------------- | ------------------------------------- |
| Bot√≥n de UI      | Normal, Hover, Activo, Deshabilitado  |
| Juego            | Jugando, Pausado, Game Over           |
| Documento        | Borrador, Revisi√≥n, Publicado         |
| Formulario       | Vac√≠o, Rellenando, Validando, Enviado |
| Sistema de login | No autenticado, Autenticado, Caducado |



## Ventajas

| Ventaja                    | Explicaci√≥n                                       |
| -------------------------- | ------------------------------------------------- |
| C√≥digo m√°s limpio          | Elimina `if/else` o `switch` complejos            |
| Facilita extensi√≥n         | Nuevos estados = nuevas clases                    |
| Cada estado es responsable | Alto **principio de responsabilidad √∫nica (SRP)** |
| Comportamiento din√°mico    | Cambia de estado en tiempo de ejecuci√≥n           |



## Desventajas

|Desventaja|Explicaci√≥n|
|---|---|
|Mayor n√∫mero de clases|Cada estado es una clase separada|
|Puede parecer sobreingenier√≠a|Para sistemas simples puede ser innecesario|
|Requiere estructura inicial|Debes planear bien el dise√±o para evitar confusi√≥n|